  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 32ms (ActiveRecord: 0.0ms)
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 10ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 4066ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 17492ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.3ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_job_definition_tags" ("job_definition_id", "tag_id")[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 6866ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:15:52 UTC], ["updated_at", 2017-03-05 12:15:52 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 4587ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (0)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:16:35 UTC], ["updated_at", 2017-03-05 12:16:35 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.4ms)[0m  [1m[34mSELECT "kuroko2_users".* FROM "kuroko2_users"[0m
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" ORDER BY "kuroko2_users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 131870ms (ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 171444ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_job_definition_tags" ("job_definition_id", "tag_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_job_definition_tags" ("job_definition_id", "tag_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_job_definition_tags" ("job_definition_id", "tag_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_job_definition_tags" ("job_definition_id", "tag_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:25:18 UTC], ["updated_at", 2017-03-05 12:25:18 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 8188ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_job_definition_tags" ("job_definition_id", "tag_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_job_definition_tags" ("job_definition_id", "tag_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "finished_at" ON "kuroko2_job_instances" ("finished_at", "canceled_at", "job_definition_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='finished_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='finished_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "job_definition_id" ON "kuroko2_job_instances" ("job_definition_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "finished_at" ON "kuroko2_job_instances" ("finished_at", "canceled_at", "job_definition_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='finished_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='finished_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "job_definition_id" ON "kuroko2_job_instances" ("job_definition_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_job_schedules" ("job_definition_id", "cron")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_job_schedules" ("job_definition_id", "cron")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_stars" ("user_id", "job_definition_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_stars" ("user_id", "job_definition_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "name" ON "kuroko2_tags" ("name")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "name" ON "kuroko2_tags" ("name")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:27:22 UTC], ["updated_at", 2017-03-05 12:27:22 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", ""], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE "kuroko2_users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", ""], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE "kuroko2_users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE "kuroko2_users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:28:26 UTC], ["updated_at", 2017-03-05 12:28:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA1"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:28:55 UTC], ["updated_at", 2017-03-05 12:28:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://test.host/sign_in?return_to=%2Fkuroko2_read_only%2Fsettings
Filter chain halted as :require_sign_in rendered or redirected
Completed 302 Found in 124983ms (ActiveRecord: 3.2ms)
  [1m[35m (4.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:29:33 UTC], ["updated_at", 2017-03-05 12:29:33 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:30:21 UTC], ["updated_at", 2017-03-05 12:30:21 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:31:27 UTC], ["updated_at", 2017-03-05 12:31:27 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:31:41 UTC], ["updated_at", 2017-03-05 12:31:41 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:31:41 UTC], ["updated_at", 2017-03-05 12:31:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:32:06 UTC], ["updated_at", 2017-03-05 12:32:06 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:32:06 UTC], ["updated_at", 2017-03-05 12:32:06 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 9548ms (ActiveRecord: 0.2ms)
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.2ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:33:08 UTC], ["updated_at", 2017-03-05 12:33:08 UTC]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (15.1ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (3.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:33:09 UTC], ["updated_at", 2017-03-05 12:33:09 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.3ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.3ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (2.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.3ms)
Completed 200 OK in 40ms (Views: 15.8ms | ActiveRecord: 2.6ms)
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.2ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (11.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (21.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:33:35 UTC], ["updated_at", 2017-03-05 12:33:35 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:33:35 UTC], ["updated_at", 2017-03-05 12:33:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.2ms)
Completed 200 OK in 23ms (Views: 10.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:38:17 UTC], ["updated_at", 2017-03-05 12:38:17 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:38:17 UTC], ["updated_at", 2017-03-05 12:38:17 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.4ms)
Completed 200 OK in 28ms (Views: 14.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:39:47 UTC], ["updated_at", 2017-03-05 12:39:47 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:39:48 UTC], ["updated_at", 2017-03-05 12:39:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.2ms)
Completed 200 OK in 25ms (Views: 12.6ms | ActiveRecord: 0.3ms)
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:39:48 UTC], ["updated_at", 2017-03-05 12:39:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#update as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:40:44 UTC], ["updated_at", 2017-03-05 12:40:44 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:40:45 UTC], ["updated_at", 2017-03-05 12:40:45 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.2ms)
Completed 200 OK in 26ms (Views: 13.8ms | ActiveRecord: 0.2ms)
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:40:45 UTC], ["updated_at", 2017-03-05 12:40:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#update as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:41:00 UTC], ["updated_at", 2017-03-05 12:41:00 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:41:01 UTC], ["updated_at", 2017-03-05 12:41:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.2ms)
Completed 200 OK in 25ms (Views: 14.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:41:01 UTC], ["updated_at", 2017-03-05 12:41:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#update as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 5189ms (ActiveRecord: 0.1ms)
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:41:22 UTC], ["updated_at", 2017-03-05 12:41:22 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:41:23 UTC], ["updated_at", 2017-03-05 12:41:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.2ms)
Completed 200 OK in 26ms (Views: 11.7ms | ActiveRecord: 0.2ms)
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:41:23 UTC], ["updated_at", 2017-03-05 12:41:23 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#update as HTML
  Parameters: {"users"=>{"1"=>{"read_only"=>"1"}}}
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["name", "test"], ["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["email", "test@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "kuroko2_users" SET "read_only" = ?, "updated_at" = ? WHERE "kuroko2_users"."id" = ?[0m  [["read_only", true], ["updated_at", 2017-03-05 12:41:28 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/kuroko2_read_only/settings
Completed 302 Found in 5869ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:41:54 UTC], ["updated_at", 2017-03-05 12:41:54 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:41:55 UTC], ["updated_at", 2017-03-05 12:41:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.2ms)
Completed 200 OK in 21ms (Views: 11.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:41:55 UTC], ["updated_at", 2017-03-05 12:41:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#update as HTML
  Parameters: {"users"=>{"1"=>{"read_only"=>"1"}}}
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.3ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["name", "test"], ["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["email", "test@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "kuroko2_users" SET "read_only" = ?, "updated_at" = ? WHERE "kuroko2_users"."id" = ?[0m  [["read_only", true], ["updated_at", 2017-03-05 12:42:19 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/kuroko2_read_only/settings
Completed 302 Found in 24296ms (ActiveRecord: 1.0ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:42:57 UTC], ["updated_at", 2017-03-05 12:42:57 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:42:58 UTC], ["updated_at", 2017-03-05 12:42:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.7ms)
Completed 200 OK in 32ms (Views: 16.4ms | ActiveRecord: 0.2ms)
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:42:58 UTC], ["updated_at", 2017-03-05 12:42:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#update as HTML
  Parameters: {"users"=>{"1"=>{"read_only"=>"1"}}}
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["name", "test"], ["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["email", "test@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "kuroko2_users" SET "read_only" = ?, "updated_at" = ? WHERE "kuroko2_users"."id" = ?[0m  [["read_only", true], ["updated_at", 2017-03-05 12:42:58 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/kuroko2_read_only/settings
Completed 302 Found in 16ms (ActiveRecord: 1.1ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:44:46 UTC], ["updated_at", 2017-03-05 12:44:46 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:44:46 UTC], ["updated_at", 2017-03-05 12:44:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.2ms)
Completed 200 OK in 21ms (Views: 11.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:44:46 UTC], ["updated_at", 2017-03-05 12:44:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#update as HTML
  Parameters: {"users"=>{"2"=>{"read_only"=>"1"}}}
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:44:57 UTC], ["updated_at", 2017-03-05 12:44:57 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:44:57 UTC], ["updated_at", 2017-03-05 12:44:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.4ms)
Completed 200 OK in 27ms (Views: 16.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:44:58 UTC], ["updated_at", 2017-03-05 12:44:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#update as HTML
  Parameters: {"users"=>{"1"=>{"read_only"=>"1"}}}
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["name", "test"], ["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["email", "test@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "kuroko2_users" SET "read_only" = ?, "updated_at" = ? WHERE "kuroko2_users"."id" = ?[0m  [["read_only", true], ["updated_at", 2017-03-05 12:44:58 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/kuroko2_read_only/settings
Completed 302 Found in 13ms (ActiveRecord: 0.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:45:04 UTC], ["updated_at", 2017-03-05 12:45:04 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:45:04 UTC], ["updated_at", 2017-03-05 12:45:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#show as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application
  Rendered /Users/hatanakayusaku/project/private/kuroko2_read_only/app/views/kuroko2_read_only/settings/show.html.erb within layouts/kuroko2/application (0.2ms)
Completed 200 OK in 21ms (Views: 10.5ms | ActiveRecord: 0.1ms)
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:45:04 UTC], ["updated_at", 2017-03-05 12:45:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Kuroko2ReadOnly::SettingsController#update as HTML
  Parameters: {"users"=>{"1"=>{"read_only"=>"1"}}}
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["name", "test"], ["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["email", "test@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "kuroko2_users" SET "read_only" = ?, "updated_at" = ? WHERE "kuroko2_users"."id" = ?[0m  [["read_only", true], ["updated_at", 2017-03-05 12:45:04 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/kuroko2_read_only/settings
Completed 302 Found in 11ms (ActiveRecord: 0.9ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:48:29 UTC], ["updated_at", 2017-03-05 12:48:29 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:48:59 UTC], ["updated_at", 2017-03-05 12:48:59 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:52:37 UTC], ["updated_at", 2017-03-05 12:52:37 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:52:37 UTC], ["updated_at", 2017-03-05 12:52:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:53:15 UTC], ["updated_at", 2017-03-05 12:53:15 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:53:16 UTC], ["updated_at", 2017-03-05 12:53:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:53:25 UTC], ["updated_at", 2017-03-05 12:53:25 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:53:26 UTC], ["updated_at", 2017-03-05 12:53:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:53:40 UTC], ["updated_at", 2017-03-05 12:53:40 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:53:40 UTC], ["updated_at", 2017-03-05 12:53:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:56:16 UTC], ["updated_at", 2017-03-05 12:56:16 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:56:16 UTC], ["updated_at", 2017-03-05 12:56:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:56:43 UTC], ["updated_at", 2017-03-05 12:56:43 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:56:43 UTC], ["updated_at", 2017-03-05 12:56:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:57:07 UTC], ["updated_at", 2017-03-05 12:57:07 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:57:07 UTC], ["updated_at", 2017-03-05 12:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:57:19 UTC], ["updated_at", 2017-03-05 12:57:19 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 12:57:19 UTC], ["updated_at", 2017-03-05 12:57:19 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:58:08 UTC], ["updated_at", 2017-03-05 12:58:08 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 12:58:42 UTC], ["updated_at", 2017-03-05 12:58:42 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:00:48 UTC], ["updated_at", 2017-03-05 13:00:48 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:00:49 UTC], ["updated_at", 2017-03-05 13:00:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:01:30 UTC], ["updated_at", 2017-03-05 13:01:30 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:01:30 UTC], ["updated_at", 2017-03-05 13:01:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:02:08 UTC], ["updated_at", 2017-03-05 13:02:08 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:02:09 UTC], ["updated_at", 2017-03-05 13:02:09 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:03:29 UTC], ["updated_at", 2017-03-05 13:03:29 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:03:29 UTC], ["updated_at", 2017-03-05 13:03:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:04:33 UTC], ["updated_at", 2017-03-05 13:04:33 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:04:57 UTC], ["updated_at", 2017-03-05 13:04:57 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (6.2ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:04:57 UTC], ["updated_at", 2017-03-05 13:04:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:05:24 UTC], ["updated_at", 2017-03-05 13:05:24 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:05:25 UTC], ["updated_at", 2017-03-05 13:05:25 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by AnonymousController#upvote as HTML
Completed 500 Internal Server Error in 4525ms (ActiveRecord: 0.0ms)
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:05:59 UTC], ["updated_at", 2017-03-05 13:05:59 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:05:59 UTC], ["updated_at", 2017-03-05 13:05:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by AnonymousController#upvote as HTML
Completed 500 Internal Server Error in 1486ms (ActiveRecord: 0.0ms)
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:06:29 UTC], ["updated_at", 2017-03-05 13:06:29 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:06:29 UTC], ["updated_at", 2017-03-05 13:06:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:07:08 UTC], ["updated_at", 2017-03-05 13:07:08 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:07:08 UTC], ["updated_at", 2017-03-05 13:07:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:07:31 UTC], ["updated_at", 2017-03-05 13:07:31 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:07:32 UTC], ["updated_at", 2017-03-05 13:07:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:07:58 UTC], ["updated_at", 2017-03-05 13:07:58 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:07:58 UTC], ["updated_at", 2017-03-05 13:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:09:06 UTC], ["updated_at", 2017-03-05 13:09:06 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:10:31 UTC], ["updated_at", 2017-03-05 13:10:31 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:10:32 UTC], ["updated_at", 2017-03-05 13:10:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by AnonymousController#show as HTML
Completed 500 Internal Server Error in 1417ms (ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:11:12 UTC], ["updated_at", 2017-03-05 13:11:12 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:11:13 UTC], ["updated_at", 2017-03-05 13:11:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:12:08 UTC], ["updated_at", 2017-03-05 13:12:08 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:12:08 UTC], ["updated_at", 2017-03-05 13:12:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:12:49 UTC], ["updated_at", 2017-03-05 13:12:49 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:12:49 UTC], ["updated_at", 2017-03-05 13:12:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:12:56 UTC], ["updated_at", 2017-03-05 13:12:56 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:12:56 UTC], ["updated_at", 2017-03-05 13:12:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:46:15 UTC], ["updated_at", 2017-03-05 13:46:15 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:46:15 UTC], ["updated_at", 2017-03-05 13:46:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:50:17 UTC], ["updated_at", 2017-03-05 13:50:17 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:50:17 UTC], ["updated_at", 2017-03-05 13:50:17 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:51:02 UTC], ["updated_at", 2017-03-05 13:51:02 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:51:02 UTC], ["updated_at", 2017-03-05 13:51:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:51:41 UTC], ["updated_at", 2017-03-05 13:51:41 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (5.3ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:51:41 UTC], ["updated_at", 2017-03-05 13:51:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:54:14 UTC], ["updated_at", 2017-03-05 13:54:14 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:56:45 UTC], ["updated_at", 2017-03-05 13:56:45 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:56:46 UTC], ["updated_at", 2017-03-05 13:56:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:57:29 UTC], ["updated_at", 2017-03-05 13:57:29 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:57:29 UTC], ["updated_at", 2017-03-05 13:57:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:58:36 UTC], ["updated_at", 2017-03-05 13:58:36 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:58:36 UTC], ["updated_at", 2017-03-05 13:58:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 13:58:58 UTC], ["updated_at", 2017-03-05 13:58:58 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 13:58:58 UTC], ["updated_at", 2017-03-05 13:58:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:02:31 UTC], ["updated_at", 2017-03-05 14:02:31 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:02:31 UTC], ["updated_at", 2017-03-05 14:02:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:02:45 UTC], ["updated_at", 2017-03-05 14:02:45 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:02:46 UTC], ["updated_at", 2017-03-05 14:02:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:04:37 UTC], ["updated_at", 2017-03-05 14:04:37 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:04:38 UTC], ["updated_at", 2017-03-05 14:04:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:18:17 UTC], ["updated_at", 2017-03-05 14:18:17 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:18:17 UTC], ["updated_at", 2017-03-05 14:18:17 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:18:55 UTC], ["updated_at", 2017-03-05 14:18:55 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:18:55 UTC], ["updated_at", 2017-03-05 14:18:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:19:40 UTC], ["updated_at", 2017-03-05 14:19:40 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:19:41 UTC], ["updated_at", 2017-03-05 14:19:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#index as HTML
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 406 Not Acceptable in 1653ms (ActiveRecord: 0.2ms)
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:20:23 UTC], ["updated_at", 2017-03-05 14:20:23 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:20:24 UTC], ["updated_at", 2017-03-05 14:20:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#index as HTML
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (0.0ms)
Completed 200 OK in 3625ms (Views: 10.4ms | ActiveRecord: 0.2ms)
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:20:52 UTC], ["updated_at", 2017-03-05 14:20:52 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:20:52 UTC], ["updated_at", 2017-03-05 14:20:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#index as HTML
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (0.0ms)
Completed 200 OK in 3781ms (Views: 5.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:22:22 UTC], ["updated_at", 2017-03-05 14:22:22 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:22:23 UTC], ["updated_at", 2017-03-05 14:22:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#index as HTML
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 1719ms (ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:23:14 UTC], ["updated_at", 2017-03-05 14:23:14 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:23:14 UTC], ["updated_at", 2017-03-05 14:23:14 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#index as HTML
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 15929ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:23:30 UTC], ["updated_at", 2017-03-05 14:23:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#create as HTML
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 2276ms (ActiveRecord: 0.2ms)
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:24:10 UTC], ["updated_at", 2017-03-05 14:24:10 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:24:10 UTC], ["updated_at", 2017-03-05 14:24:10 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:24:10 UTC], ["updated_at", 2017-03-05 14:24:10 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:24:27 UTC], ["updated_at", 2017-03-05 14:24:27 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:24:27 UTC], ["updated_at", 2017-03-05 14:24:27 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" ORDER BY "kuroko2_users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["name", "test"], ["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["email", "test@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "kuroko2_users" SET "read_only" = ?, "updated_at" = ? WHERE "kuroko2_users"."id" = ?[0m  [["read_only", true], ["updated_at", 2017-03-05 14:24:27 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#index as HTML
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 5751ms (ActiveRecord: 0.4ms)
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:24:33 UTC], ["updated_at", 2017-03-05 14:24:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Load (3.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" ORDER BY "kuroko2_users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["name", "test"], ["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["email", "test@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "kuroko2_users" SET "read_only" = ?, "updated_at" = ? WHERE "kuroko2_users"."id" = ?[0m  [["read_only", true], ["updated_at", 2017-03-05 14:24:33 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#create as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1181ms (ActiveRecord: 0.1ms)
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:25:48 UTC], ["updated_at", 2017-03-05 14:25:48 UTC]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:25:49 UTC], ["updated_at", 2017-03-05 14:25:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" ORDER BY "kuroko2_users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["name", "test"], ["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["email", "test@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "kuroko2_users" SET "read_only" = ?, "updated_at" = ? WHERE "kuroko2_users"."id" = ?[0m  [["read_only", true], ["updated_at", 2017-03-05 14:25:49 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#index as HTML
  [1m[36mKuroko2::User Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 1451ms (ActiveRecord: 0.2ms)
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:25:50 UTC], ["updated_at", 2017-03-05 14:25:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" ORDER BY "kuroko2_users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["name", "test"], ["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["email", "test@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "kuroko2_users" SET "read_only" = ?, "updated_at" = ? WHERE "kuroko2_users"."id" = ?[0m  [["read_only", true], ["updated_at", 2017-03-05 14:25:50 UTC], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#create as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 931ms (ActiveRecord: 0.1ms)
  [1m[35m (3.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "kuroko2_ar_internal_metadata"."value" FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "kuroko2_schema_migrations" (version) VALUES (25)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-05 14:26:42 UTC], ["updated_at", 2017-03-05 14:26:42 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "kuroko2_schema_migrations".* FROM "kuroko2_schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "kuroko2_admin_assignments"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_admin_assignments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "user_id" ON "kuroko2_admin_assignments" ("user_id", "job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_executions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_executions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "token_id" integer(4), "queue" varchar(180) DEFAULT '@default' NOT NULL, "shell" text(65535) NOT NULL, "context" text(65535) NOT NULL, "pid" integer(4), "output" text(4294967295), "exit_status" integer(1), "term_signal" integer(1), "started_at" datetime, "finished_at" datetime, "mailed_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "job_definition_id" ON "kuroko2_executions" ("job_definition_id", "token_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='job_definition_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='job_definition_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "started_at" ON "kuroko2_executions" ("started_at")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definition_tags"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definition_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4) NOT NULL, "tag_id" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_definitions"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_definitions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer(4) DEFAULT 0 NOT NULL, "name" varchar(180) NOT NULL, "description" text(65535) NOT NULL, "script" text(65535) NOT NULL, "suspended" boolean DEFAULT 'f' NOT NULL, "prevent_multi" integer(4) DEFAULT 1 NOT NULL, "notify_cancellation" boolean DEFAULT 't' NOT NULL, "hipchat_room" varchar(180) DEFAULT '' NOT NULL, "hipchat_notify_finished" boolean DEFAULT 't' NOT NULL, "hipchat_additional_text" varchar(180), "slack_channel" varchar(180) DEFAULT '' NOT NULL, "api_allowed" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "name" ON "kuroko2_job_definitions" ("name")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_job_instances"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_instances" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "script" text(65535), "finished_at" datetime, "canceled_at" datetime, "error_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE "kuroko2_job_schedules"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_job_suspend_schedules"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_job_suspend_schedules" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_definition_id" integer(4), "cron" varchar(180), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_logs"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "level" varchar(10), "message" text(4294967295), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "job_instance_id" ON "kuroko2_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_consumption_logs"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_consumption_logs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "job_instance_id" integer(4), "value" integer(4) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_memory_consumption_logs_on_job_instance_id" ON "kuroko2_memory_consumption_logs" ("job_instance_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_memory_expectancies"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "kuroko2_memory_expectancies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "expected_value" integer(4) DEFAULT 0 NOT NULL, "job_definition_id" integer(4), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "index_memory_expectancies_on_job_definition_id" ON "kuroko2_memory_expectancies" ("job_definition_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_process_signals"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "kuroko2_process_signals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) DEFAULT '' NOT NULL, "pid" integer(4) NOT NULL, "number" integer(1) DEFAULT 15 NOT NULL, "started_at" datetime, "created_at" datetime, "updated_at" datetime, "message" text(65535))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "hostname_started_at" ON "kuroko2_process_signals" ("hostname", "started_at")[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "kuroko2_stars"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_stars" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer(4) NOT NULL, "job_definition_id" integer(4) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_tags"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(100) NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "kuroko2_ticks"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_ticks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "at" datetime)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "kuroko2_tokens"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(36) NOT NULL, "job_definition_id" integer(4), "job_definition_version" integer(4), "job_instance_id" integer(4), "parent_id" integer(4), "script" text(65535) NOT NULL, "path" varchar(180) DEFAULT '/' NOT NULL, "status" integer(4) DEFAULT 0 NOT NULL, "message" text(65535) NOT NULL, "context" text(65535) NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "parent_id" ON "kuroko2_tokens" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='parent_id' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "status" ON "kuroko2_tokens" ("status")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_users"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "kuroko2_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar(180) DEFAULT 'google_oauth2' NOT NULL, "uid" varchar(180) NOT NULL, "name" varchar(180) DEFAULT '' NOT NULL, "email" varchar(180) NOT NULL, "first_name" varchar(180) DEFAULT '' NOT NULL, "last_name" varchar(180) DEFAULT '' NOT NULL, "image" varchar(180) DEFAULT '' NOT NULL, "read_only" boolean DEFAULT 'f', "suspended_at" datetime, "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "email" ON "kuroko2_users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE  INDEX "uid_2" ON "kuroko2_users" ("uid", "suspended_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='uid_2' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='uid_2' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "uid" ON "kuroko2_users" ("uid")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "kuroko2_workers"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "kuroko2_workers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "hostname" varchar(180) NOT NULL, "worker_id" integer(1) NOT NULL, "queue" varchar(180) DEFAULT '@default' NOT NULL, "working" boolean DEFAULT 'f' NOT NULL, "execution_id" integer(4), "created_at" datetime, "updated_at" datetime)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "hostname" ON "kuroko2_workers" ("hostname", "worker_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT version FROM "kuroko2_schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "kuroko2_ar_internal_metadata".* FROM "kuroko2_ar_internal_metadata" WHERE "kuroko2_ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:26:42 UTC], ["updated_at", 2017-03-05 14:26:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" ORDER BY "kuroko2_users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["name", "test"], ["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["email", "test@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "kuroko2_users" SET "read_only" = ?, "updated_at" = ? WHERE "kuroko2_users"."id" = ?[0m  [["read_only", true], ["updated_at", 2017-03-05 14:26:42 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#index as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) LIMIT ?[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "kuroko2_users" ("uid", "name", "email", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["uid", "Digest::SHA2"], ["name", "test"], ["email", "test@example.com"], ["image", "//www.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=90&d=mm"], ["created_at", 2017-03-05 14:26:42 UTC], ["updated_at", 2017-03-05 14:26:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" ORDER BY "kuroko2_users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."name") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["name", "test"], ["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "kuroko2_users" WHERE LOWER("kuroko2_users"."email") = LOWER(?) AND ("kuroko2_users"."id" != ?) LIMIT ?[0m  [["email", "test@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "kuroko2_users" SET "read_only" = ?, "updated_at" = ? WHERE "kuroko2_users"."id" = ?[0m  [["read_only", true], ["updated_at", 2017-03-05 14:26:42 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by RequestHandlerController#create as HTML
  [1m[36mKuroko2::User Load (0.1ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mKuroko2::User Load (0.0ms)[0m  [1m[34mSELECT  "kuroko2_users".* FROM "kuroko2_users" WHERE "kuroko2_users"."suspended_at" IS NULL AND "kuroko2_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
